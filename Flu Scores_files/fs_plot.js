/*
 ____   ___    _   _  ___ _____   _____ ____ ___ _____ 
|  _ \ / _ \  | \ | |/ _ \_   _| | ____|  _ \_ _|_   _|
| | | | | | | |  \| | | | || |   |  _| | | | | |  | |  
| |_| | |_| | | |\  | |_| || |   | |___| |_| | |  | |  
|____/ \___/  |_| \_|\___/ |_|   |_____|____/___| |_|  
                                                       
        Automatically generated from sources at:       
      https://github.com/cmu-delphi/www-fluscores      
*/



(function(){var t,e,i,s,n,h;s=function(t){var e;return _.zip(function(){e=[];for(var i=0,s=t.length;0<=s?i<s:i>s;0<=s?i++:i--)e.push(i);return e}.apply(this),t)},n=function(){return.001*new Date},h=function(t,e){var i;return i=new PIXI.Text(t,e),i.anchor.set(.5,.5),i},i=function(){function t(t,e){var i;this.mesh=t,i=[e,e],this.src=i[0],this.dst=i[1]}return t.ease=function(t){return(1-Math.cos(Math.min(1,Math.max(0,t))*Math.PI))/2},t.blend=function(t,e,i){return(1-i)*t+i*e},t.prototype.setTarget=function(e,i){var s,n,h,a;return null==i&&(i=1),n=t.ease(i),h=t.blend(this.src.x,this.dst.x,n),a=t.blend(this.src.y,this.dst.y,n),s=[new PIXI.Point(h,a),e],this.src=s[0],this.dst=s[1],s},t.prototype.update=function(e,i,s){var n;return n=t.ease(e),this.mesh.position.x=i*t.blend(this.src.x,this.dst.x,n),this.mesh.position.y=s*t.blend(this.src.y,this.dst.y,n)},t}(),t=function(){function t(){var t;t=[{mean:0,std:0},{mean:0,std:0}],this.src=t[0],this.dst=t[1]}return t.prototype.setTarget=function(t,e,s){var n,h,a,r;return null==s&&(s=1),r=i.ease(s),n=i.blend(this.src.mean,this.dst.mean,r),a=i.blend(this.src.std,this.dst.std,r),h=[{mean:n,std:a},{mean:t,std:e}],this.src=h[0],this.dst=h[1],h},t.prototype.draw=function(t,e,s,n,h,a,r){var o,l,d,u,p,c,m,x;return x=i.ease(t),p=i.blend(this.src.mean,this.dst.mean,x),m=i.blend(this.src.std,this.dst.std,x),d=h+e.getY(p,t)*r,l=h+e.getY(p-m,t)*r,u=h+e.getY(p+m,t)*r,o=new PIXI.Graphics,o.lineStyle(0,0,0),o.beginFill(s,.5),o.drawRect(n-a/2,l,a,u-l),o.endFill(),o.lineStyle(3,s,1),o.moveTo(n-a/2,d),o.lineTo(n+a/2,d),(null!=(c=o.currentPath)?c.shape:void 0)&&(o.currentPath.shape.closed=!1),o},t}(),("undefined"!=typeof exports&&null!==exports?exports:window).FS_Plot=e=function(){function e(a,r){var o,l,d,u,p,c,m,x,f,g,w,y,M,I,P,T,v,S,b,C,k,D,X,F,R,q,A,_,Y,L,G;for(this.teams=r,this.xTicks=function(){var t,e,i;for(i=[],d=t=0,e=FS_Data.epiweeks.length;0<=e?t<e:t>e;d=0<=e?++t:--t)i.push((d+.5)/FS_Data.epiweeks.length);return i}(),v=[a.width(),a.height()],this.w=v[0],this.h=v[1],P={view:a[0],antialias:!0},this.renderer=new PIXI.autoDetectRenderer(this.w,this.h,P),this.renderer.backgroundColor=16777215,this.teamColors={},S=s(this.teams),u=0,m=S.length;u<m;u++)k=S[u],d=k[0],L=k[1],this.teamColors[L]=e.colors[d%e.colors.length];for(this.showPoints=!1,this.stageTeamPoints={},T=new PIXI.Point(.5,.5),this.points={},D=this.teams,p=0,x=D.length;p<x;p++)for(L=D[p],this.points[L]=[],this.stageTeamPoints[L]=new PIXI.Container,X=FS_Data.epiweeks,c=0,f=X.length;c<f;c++)o=X[c],l=new PIXI.Graphics,l.beginFill(this.teamColors[L],1),l.lineStyle(2,0,1),l.drawCircle(0,0,4),l.endFill(),this.stageTeamPoints[L].addChild(l),this.points[L].push(new i(l,T));for(this.lineOrder=function(){_=[];for(var t=0,e=this.teams.length;0<=e?t<e:t>e;0<=e?t++:t--)_.push(t);return _}.apply(this),this.teamBars=[],F=this.teams,M=0,g=F.length;M<g;M++)L=F[M],this.teamBars.push(new t);for(this.renderRequested=!1,this.lastMode=this.mode="line",R=[-1,1],this.plotMin=R[0],this.plotMax=R[1],q=[-1,1],this.dataMin=q[0],this.dataMax=q[1],A=[-1.1,1.1],this.axisMin=A[0],this.axisMax=A[1],G=h("AE/LS",e.labelStyle),this.axisLabels={line:{x:h("Epiweek",e.labelStyle),y:G},bar:{x:h("Team",e.labelStyle),y:G}},this.axisTicks={line:{x:function(){var t,i,s,n;for(s=FS_Data.epiweeks,n=[],i=0,t=s.length;i<t;i++)o=s[i],n.push(h(""+o,e.tickStyle));return n}()},bar:{x:function(){var t,i,s,n;for(s=this.teams,n=[],i=0,t=s.length;i<t;i++)L=s[i],n.push(h(L,e.tickStyle));return n}.call(this)}},this.legend=new PIXI.Container,b=s(this.teams),I=0,w=b.length;I<w;I++)C=b[I],d=C[0],L=C[1],Y={font:e.tickStyle.font,fill:this.teamColors[L]},y=h(L,Y),y.position.set(y.width/2,16*(d+1)),this.legend.addChild(y);this.wILI=null,this.animationStartTime=n()}return e.animationDuration=.25,e.colors=[4227264,12599424,12615744,4243584,8405184,8437824],e.labelStyle={font:"bold 32px Calibri"},e.tickStyle={font:"16px Calibri"},e.prototype.requestRender=function(){if(!this.renderRequested)return this.renderRequested=!0,requestAnimationFrame(function(t){return function(e){return t.render(e)}}(this))},e.prototype.render=function(t){var a,r,o,l,d,u,p,c,m,x,f,g,w,y,M,I,P,T,v,S,b,C,k,D,X,F,R,q,A,_,Y,L,G,O,B,z,W,E,U,V,j,H,J,K,N,Q,Z,$,tt,et,it,st,nt,ht,at,rt,ot,lt,dt,ut,pt,ct,mt,xt,ft,gt,wt,yt,Mt,It,Pt,Tt,vt,St,bt,Ct,kt,Dt,Xt,Ft,Rt;if(this.renderRequested=!1,r=(n()-this.animationStartTime)/e.animationDuration,r<1&&this.requestRender(),Rt={x:0,y:0,w:64,h:this.h},A={x:Rt.w,y:0,w:this.w-Rt.w,h:this.h-32},kt={x:A.x,y:A.y+A.h,w:this.w-A.x,h:this.h-(A.y+A.h)},ct=new PIXI.Container,ct.position.set(A.x,A.y),null!==this.wILI&&this.wILI.length>0){for(C=new PIXI.Graphics,C.lineStyle(3,0,.25),f=w=1,O=this.wILI.length;1<=O?w<O:w>O;f=1<=O?++w:--w)x=f-1,bt=this.xTicks[x]*A.w,Ct=this.xTicks[f]*A.w,Xt=this.getY(i.blend(this.dataMin,this.dataMax,this.wILI[x]))*A.h,Ft=this.getY(i.blend(this.dataMin,this.dataMax,this.wILI[f]))*A.h,C.moveTo(bt,Xt),C.lineTo(Ct,Ft),(null!=(B=C.currentPath)?B.shape:void 0)&&(C.currentPath.shape.closed=!1);ct.addChild(C)}for(Q=this.teams,y=0,I=Q.length;y<I;y++)for(xt=Q[y],st=this.points[xt],M=0,P=st.length;M<P;M++)q=st[M],q.update(r,A.w,A.h);for(ut=new PIXI.Container,nt=this.lineOrder,D=0,T=nt.length;D<T;D++){for(wt=nt[D],gt=this.teams[wt],C=new PIXI.Graphics,a=this.showPoints?.75:1,C.lineStyle(3,this.teamColors[gt],a),_=this.points[gt],f=X=1,ht=_.length;1<=ht?X<ht:X>ht;f=1<=ht?++X:--X)x=f-1,C.moveTo(_[x].mesh.position.x,_[x].mesh.position.y),C.lineTo(_[f].mesh.position.x,_[f].mesh.position.y),(null!=(at=C.currentPath)?at.shape:void 0)&&(C.currentPath.shape.closed=!1);ut.addChild(C)}if(ct.addChild(ut),this.showPoints)for(rt=this.lineOrder,F=0,v=rt.length;F<v;F++)wt=rt[F],ct.addChild(this.stageTeamPoints[this.teams[wt]]);for(Mt=new PIXI.Container,o=new PIXI.Graphics,R=new PIXI.Graphics,o.lineStyle(3,0,1),bt=kt.x+this.xTicks[0]*kt.w,Ct=kt.x+this.xTicks[this.xTicks.length-1]*kt.w,Xt=A.y+this.getY(this.dataMin)*A.h,Ft=A.y+this.getY(this.dataMax)*A.h,o.moveTo(A.x,Xt),o.lineTo(A.x,Ft),o.moveTo(bt,kt.y),o.lineTo(Ct,kt.y),(null!=(ot=o.currentPath)?ot.shape:void 0)&&(o.currentPath.shape.closed=!1),vt=i.ease(r),c=i.blend(this.lastDataMin,this.dataMin,vt),p=i.blend(this.lastDataMax,this.dataMax,vt),g=1,G=p-c;g>=.01&&G/g<6;)g*=.5;for(;g<100&&G/g>=12;)g*=2;for(Math.abs(p)>Math.abs(c)?(lt=[1,Math.abs(p)],m=lt[0],ft=lt[1]):(z=[-1,Math.abs(c)],m=z[0],ft=z[1]),f=Y=0,W=G/g;0<=W?Y<=W:Y>=W;f=0<=W?++Y:--Y){for(Pt=m*f*g,St=A.x,Dt=A.y+this.getY(Pt,r)*A.h,mt=Pt.toFixed(2);mt.indexOf(".")>=0&&(mt.endsWith("0")||mt.endsWith("."));)mt=mt.substring(0,mt.length-1);yt=h(mt,e.tickStyle),yt.position.set(St-yt.width/2-15,Dt),Mt.addChild(yt),o.lineStyle(1,0,.1),o.moveTo(bt,Dt),o.lineTo(Ct,Dt),o.lineStyle(3,0,1),o.moveTo(St,Dt),o.lineTo(St-10,Dt)}if("line"===this.mode)for(f=L=0,E=FS_Data.epiweeks.length;0<=E?L<E:L>E;f=0<=E?++L:--L)U=[kt.x+this.xTicks[f]*kt.w,kt.y],St=U[0],Dt=U[1],f%3===0?(k=3,yt=this.axisTicks[this.mode].x[f],yt.position.set(St,Dt+20),Mt.addChild(yt)):k=1,o.lineStyle(1,0,.1),o.moveTo(St,Xt),o.lineTo(St,Ft),(null!=(V=o.currentPath)?V.shape:void 0)&&(o.currentPath.shape.closed=!1),o.lineStyle(k,0,1),o.moveTo(St,Dt),o.lineTo(St,Dt+10),(null!=(j=o.currentPath)?j.shape:void 0)&&(o.currentPath.shape.closed=!1);else for(H=s(this.teams),dt=0,S=H.length;dt<S;dt++)J=H[dt],f=J[0],gt=J[1],K=[kt.x+(f+.5)/this.teams.length*kt.w,kt.y],St=K[0],Dt=K[1],yt=this.axisTicks[this.mode].x[f],yt.position.set(St,Dt+20),Mt.addChild(yt),o.lineStyle(1,0,.1),o.moveTo(St,Xt),o.lineTo(St,Ft),(null!=(N=o.currentPath)?N.shape:void 0)&&(o.currentPath.shape.closed=!1),o.lineStyle(3,0,1),o.moveTo(St,Dt),o.lineTo(St,Dt+10),(null!=(Z=o.currentPath)?Z.shape:void 0)&&(o.currentPath.shape.closed=!1);if("line"!==this.mode||"line"!==this.lastMode)for($=s(this.teamBars),It=0,b=$.length;It<b;It++)tt=$[It],f=tt[0],d=tt[1],et=[kt.x+(f+.5)/this.teams.length*kt.w,A.y],St=et[0],Dt=et[1],it=[.9/this.teams.length*A.w,A.h],Tt=it[0],x=it[1],u=this.teamColors[this.teams[f]],q=r,l=d.draw(q,this,u,St,Dt,Tt,x),this.lastMode!==this.mode?(q="line"===this.mode?1-r:r,l.alpha=i.ease(q)):d.alpha=1,R.addChild(l);return this.legend.position.set(A.x+A.w-this.legend.width-8,A.y),pt=new PIXI.Container,pt.addChild(Mt),pt.addChild(o),pt.addChild(ct),pt.addChild(R),pt.addChild(this.legend),this.renderer.render(pt)},e.prototype.update=function(t){var h,a,r,o,l,d,u,p,c,m,x,f,g,w,y,M,I,P,T,v,S,b,C,k,D,X,F,R,q,A,_,Y,L,G,O,B,z,W,E,U,V,j,H,J;for(v=[0,0],y=v[0],w=v[1],this.teamAverages={},this.teamStds={},S=s(this.teams),o=0,p=S.length;o<p;o++){for(F=S[o],r=F[0],z=F[1],B=0,R=t[z],l=0,c=R.length;l<c;l++)U=R[l],y=Math.min(y,U),w=Math.max(w,U),B+=U;for(this.teamAverages[z]=B/t[z].length,B=0,q=t[z],d=0,m=q.length;d<m;d++)U=q[d],B+=Math.pow(U-this.teamAverages[z],2);this.teamStds[z]=Math.pow(B/t[z].length,.5),this.teamBars[r].setTarget(this.teamAverages[z],this.teamStds[z])}if(P=.05*(w-y),A=[this.dataMin,this.dataMax],this.lastDataMin=A[0],this.lastDataMax=A[1],_=[this.axisMin,this.axisMax],this.lastAxisMin=_[0],this.lastAxisMax=_[1],Y=[y,w],this.dataMin=Y[0],this.dataMax=Y[1],L=[y-P,w+P],this.axisMin=L[0],this.axisMax=L[1],h=(n()-this.animationStartTime)/e.animationDuration,"line"===this.mode)for(r=g=0,G=FS_Data.epiweeks.length;0<=G?g<G:g>G;r=0<=G?++g:--g)for(H=this.xTicks[r],b=this.teams,M=0,x=b.length;M<x;M++)z=b[M],J=this.getY(t[z][r]),this.points[z][r].setTarget(new PIXI.Point(H,J),h);else for(C=s(this.teams),I=0,f=C.length;I<f;I++)for(k=C[I],E=k[0],W=k[1],a=(E+.5)/this.teams.length,j=.8/this.teams.length,D=[a-j/2,a+j/2],u=D[0],O=D[1],V=T=0,X=FS_Data.epiweeks.length;0<=X?T<X:T>X;V=0<=X?++T:--T)H=i.blend(u,O,V/(FS_Data.epiweeks.length-1)),J=this.getY(t[W][V]),this.points[W][V].setTarget(new PIXI.Point(H,J),h);return this.animationStartTime=n(),this.requestRender()},e.prototype.getY=function(t,e){var s,n,h;return null==e&&(e=1),h=i.ease(e),n=i.blend(this.lastAxisMin,this.axisMin,h),s=i.blend(this.lastAxisMax,this.axisMax,h),1-(t-n)/(s-n)},e.prototype.lineMode=function(){var t;return t=[this.mode,"line"],this.lastMode=t[0],this.mode=t[1],t},e.prototype.barMode=function(){var t;return t=[this.mode,"bar"],this.lastMode=t[0],this.mode=t[1],t},e.prototype.resize=function(t,e){var i;return this.renderer.resize(t,e),i=[t,e],this.w=i[0],this.h=i[1],this.requestRender()},e.prototype.setPointsVisible=function(t){return this.showPoints=t,this.requestRender()},e.prototype.shakeItUp=function(){var t,e,i,s,h,a,r,o,l,d,u,p,c,m,x,f;for(d=function(){return.01*(2*Math.random()-1)},this.lineOrder=_.shuffle(this.lineOrder),this.lastMode=this.mode,u=[this.dataMin,this.dataMax],this.lastDataMin=u[0],this.lastDataMax=u[1],p=[this.axisMin,this.axisMax],this.lastAxisMin=p[0],this.lastAxisMax=p[1],c=this.teamBars,s=0,r=c.length;s<r;s++)t=c[s],t.src=t.dst;for(i=h=0,m=FS_Data.epiweeks.length;0<=m?h<m:h>m;i=0<=m?++h:--h)for(x=this.teams,a=0,o=x.length;a<o;a++)f=x[a],l=this.points[f][i],e=l.dst,l.src=new PIXI.Point(e.x+d(),e.y+d());return this.animationStartTime=n(),this.requestRender()},e.prototype.setWili=function(t){return this.wILI=t,this.requestRender()},e}()}).call(this);